# Cloudflared Web + Cloudflare Worker å°ˆæ¡ˆæµç¨‹åœ–

é€™è£¡æ˜¯ä¸€å€‹æ¸…æ™°çš„æ“ä½œèˆ‡éƒ¨ç½²æµç¨‹åœ–ï¼Œå¹«åŠ©ä½ æˆ–åœ˜éšŠæˆå“¡å¿«é€Ÿç†è§£æ•´å€‹ç³»çµ±æ¶æ§‹èˆ‡æµç¨‹ ğŸš€

---

```mermaid
flowchart TD

    A[ä½  / é–‹ç™¼è€…] -->|Push ä»£ç¢¼| B[GitHub Repository]
    B -->|è§¸ç™¼ Actions| C[GitHub Actions Workflow]
    C -->|è®€å– Secrets (.env.local / GitHub Secrets)| D[Cloudflare API]
    D -->|éƒ¨ç½²æˆåŠŸ| E[Cloudflare Workers]

    E -->|æ¥æ”¶è«‹æ±‚| F[è¨ªå•è€…]
    F -->|é€éç¶²å€å­˜å–| G[workers.dev æˆ–è‡ªè¨‚åŸŸå]

    subgraph Cloudflare Tunnel ç®¡ç†
      H[Cloudflared Web UI (Docker)] -->|é…ç½® Tunnel Token| I[Cloudflare Tunnel]
      I -->|å®‰å…¨é€£ç·š| J[Raspberry Pi æœ¬åœ°æœå‹™]
      J --> K[Home Assistant / NAS / Media Server]
    end

    E -->|ä»£ç†è½‰ç™¼| I
```

---

## æµç¨‹è§£èªª

1. âœ… ä½ é–‹ç™¼å®Œæˆå¾Œï¼Œpush ä»£ç¢¼åˆ° GitHub Repositoryã€‚
2. âœ… GitHub Actions è‡ªå‹•è§¸ç™¼ï¼Œè®€å– `.env.local` æˆ– GitHub Secrets è£¡çš„å¸³è™Ÿå’Œ Token è³‡è¨Šã€‚
3. âœ… GitHub Actions è‡ªå‹•åŸ·è¡Œ wrangler deployï¼Œéƒ¨ç½²åˆ° Cloudflare Workersã€‚
4. âœ… ä½¿ç”¨è€…ï¼ˆæˆ–ä½ è‡ªå·±ï¼‰é€šé workers.dev æˆ–è‡ªè¨‚åŸŸåè¨ªå•ä½ çš„ Workerï¼ŒWorker æœƒä»£ç†è«‹æ±‚åˆ° Cloudflare Tunnelã€‚
5. âœ… Cloudflared Web UI ç®¡ç† Tunnel ç‹€æ…‹ï¼Œå¯¦ç¾æœ¬åœ°æœå‹™çš„å®‰å…¨æš´éœ²èˆ‡ç®¡ç†ã€‚

---

## é¡å¤–å»ºè­° âœ…

- ğŸ§© Docker Compose ç®¡ç† Cloudflared Web UIï¼Œä¸¦é…åˆ Watchtower å¯¦ç¾è‡ªå‹•æ›´æ–°ã€‚
- ğŸ›¡ï¸ Cloudflare Zero Trust é…ç½®ï¼Œå¢å¼· Tunnel å®‰å…¨é˜²è­·å±¤ç´šã€‚
- ğŸ“Š åŠ å…¥å¥åº·æª¢æŸ¥èˆ‡å³æ™‚é€šçŸ¥ï¼ˆå¦‚ LINEã€Telegram Botï¼‰ï¼Œè¿½è¹¤ Tunnel åŠ Worker ç‹€æ…‹ã€‚


